<template>
    <div>
        <div class="slds-form-element">
            <div class="slds-form-element__control">
                <div class="slds-combobox_container">
                    <div id="box" class={boxClass} aria-expanded="true" aria-haspopup="listbox" role="combobox">
                        <div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right" role="none">
                           
                            <template if:true={isValueSelected}>
                                <div data-key="pilldiv" class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_left-right" role="none">  
										 <span class="slds-icon_container slds-icon-standard-account slds-combobox__input-entity-icon" title="object">  
											  <div class="slds-icon slds-icon_small" aria-hidden="true">  
												   <lightning-icon icon-name={iconName} size="small"></lightning-icon>  
												  </div>  
												  <span class="slds-assistive-text">Record</span>  
												 </span>  
												 <input type="text" class="slds-input slds-combobox__input slds-combobox__input-value" aria-controls="listbox-id-5" role="textbox" placeholder="Select an Option" readonly value={searchTerm} />
												 
												 <button class="slds-button slds-button_icon slds-input__icon slds-input__icon_right" onclick={handleRemovePill}  
												 title="Remove selected option">  
												  <span class="slds-button__icon" aria-hidden="true" >  
												   <lightning-icon icon-name="utility:close"   
													size="xx-Small" class="slds-icon slds-icon slds-icon_x-small slds-icon-text-default" aria-hidden="true"></lightning-icon>  
												  </span>  
									     <span class="slds-assistive-text">Remove selected record</span>  
										       </button>  
                                 </div>
                            </template>
                            <template if:false={isValueSelected}>
                                <!--lightning-spinner if:true={isLoading} alternative-text="Loading" size="small"></lightning-spinner-->
                                <div class="slds-p-top_none">
                                    <lightning-input class={inputClass} type="search" id="input" value={searchTerm}
                                                     onclick={handleClick} onblur={onBlur} onchange={onChange}
                                                     variant="label-hidden" autocomplete="off" placeholder={searchPlaceholder}>
                                    </lightning-input>
                                </div>
                            </template>
                        </div>
                        
                         <div id="list-box" data-id="sfdx-lc" data-my-id="in3" class="slds-dropdown slds-dropdown_length-with-icon-7 slds-dropdown_fluid" role="listbox">
                            <ul id="sfdx-ul" class="slds-listbox slds-listbox_vertical" role="presentation">
                                
                                <template for:each={records} for:item="record">
                                    <li key={record.Id} onclick={onSelect} data-id={record.Id} role="presentation" data-name={record.Name}>
                                        <span class="slds-lookup__item-action slds-lookup__item-action--label" role="option">
                                            <lightning-icon class="slds-icon slds-icon--small slds-icon-text-default" icon-name={iconName} alternative-text={objName} size="small"></lightning-icon>
                                            <span class="slds-truncate">{record.Name}</span>
                                        </span>
                                    </li>
                                </template>
                            
                            </ul>
                         </div>
                       
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>